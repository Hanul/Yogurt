UUI.BUTTON=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a,d,u=n.img,c=n.title,l=void 0===n.spacing?0:n.spacing,s=n.href,p=n.target;o=A({style:{display:"block",textAlign:"center",cursor:"pointer",textDecoration:"none",touchCallout:"none",userSelect:"none"},href:s,target:p}),void 0!==c&&o.prepend(i=DIV({c:void 0===c?"":c})),void 0!==u&&o.prepend(DIV({style:{marginBottom:void 0!==c?l:0},c:u})),e.setDom(o),t.setTitle=r=function(e){i.empty(),i.append(e)},t.getImg=a=function(){return u},t.tap=d=function(){EVENT.fireAll({node:t,name:"tap"})}}}),UUI.BUTTON_H=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a,d,u,c=n.img,l=n.title,s=void 0===n.spacing?0:n.spacing,p=n.href,f=n.target,v=n.isImgRight;o=A({style:{display:"block",cursor:"pointer",textDecoration:"none",touchCallout:"none",userSelect:"none"},href:p,target:f,c:[i=DIV({style:{flt:"left"},c:void 0===l?"":l}),CLEAR_BOTH()]}),void 0!==c&&(c.addStyle({flt:"left"}),void 0===c.getStyle("margin")&&void 0===c.getStyle("marginRight")&&c.addStyle(v!==!0?{marginRight:s}:{marginLeft:s}),v!==!0?o.prepend(c):i.after(c),r=EVENT({name:"resize"},function(){var e=i.getHeight();e>0&&i.addStyle({marginTop:(c.getHeight()-i.getHeight())/2})}),EVENT_ONCE({node:c,name:"load"},function(){r.fire()}),t.on("show",function(){r.fire()}),t.on("remove",function(){r.remove()})),e.setDom(o),t.setTitle=a=function(e){i.empty(),i.append(e)},t.getImg=d=function(){return c},t.tap=u=function(){EVENT.fireAll({node:t,name:"tap"})}}}),UUI.FULL_CHECKBOX=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a,d,u,c,l,s,p,f,v=n.name,m=n.label,y=n.value,g=n.wrapperStyle,E=n.inputStyle;o=DIV({style:{position:"relative"},on:{tap:function(e){i.toggleCheck(),e.stop()}},c:[i=INPUT({style:{flt:"left",marginRight:5},name:v,type:"checkbox",on:{tap:function(e){e.stop()}},value:y}),r=SPAN({style:{flt:"left",cursor:"pointer"},c:m}),CLEAR_BOTH()]}),e.setWrapperDom(o),t.getName=a=function(){return v},t.getValue=d=function(){return i.getValue()},t.setValue=u=function(e){i.setValue(e)},t.select=c=function(){i.select()},t.blur=l=function(){i.blur()},t.addWrapperStyle=s=function(e){o.addStyle(e)},void 0!==g&&s(g),t.addInputStyle=p=function(e){i.addStyle(e)},void 0!==E&&p(E),t.on=f=function(e,n){"focus"===e||"blur"===e||"change"===e||"keydown"===e||"keypress"===e||"keyup"===e?EVENT({node:t,lowNode:i,name:e},n):EVENT({node:t,lowNode:o,name:e},n)}}}),UUI.FULL_INPUT=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a,d,u,c,l,s,p,f,v=n.name,m=n.type,y=n.placeholder,g=n.value,E=n.wrapperStyle,S=n.inputStyle;o=DIV({style:{padding:5,backgroundColor:"#fff"},c:DIV({style:{position:"relative"},c:[SPAN({style:{visibility:"hidden"},c:"."}),i=INPUT({style:{position:"absolute",left:0,top:0,width:"100%",border:"none",background:"transparent"},name:v,type:m,value:g,placeholder:y})]}),on:{tap:function(){i.focus()}}}),e.setWrapperDom(o),t.getName=r=function(){return v},t.getValue=a=function(){return i.getValue()},t.setValue=d=function(e){i.setValue(e)},t.select=u=function(){i.select()},t.focus=c=function(){i.focus()},t.blur=l=function(){i.blur()},t.addWrapperStyle=s=function(e){o.addStyle(e)},void 0!==E&&s(E),t.addInputStyle=p=function(e){i.addStyle(e)},void 0!==S&&p(S),t.on=f=function(e,n){"focus"===e||"blur"===e||"change"===e||"keydown"===e||"keypress"===e||"keyup"===e?EVENT({node:t,lowNode:i,name:e},n):EVENT({node:t,lowNode:o,name:e},n)}}}),UUI.FULL_SELECT=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a,d,u,c,l,s,p,f,v=n.name,m=n.value,y=n.options,g=n.wrapperStyle,E=n.selectStyle;o=DIV({style:{padding:5,backgroundColor:"#fff",position:"relative"},c:i=SELECT({style:{width:"100%",border:"none",background:"transparent"},name:v,value:m,c:y})}),e.setWrapperDom(o),t.getName=r=function(){return v},t.getValue=a=function(){return i.getValue()},t.setValue=d=function(e){i.setValue(e)},t.select=u=function(){i.select()},t.blur=c=function(){i.blur()},t.addWrapperStyle=l=function(e){o.addStyle(e)},void 0!==g&&l(g),t.addSelectStyle=s=function(e){i.addStyle(e)},void 0!==E&&s(E),t.addOption=p=function(e){i.append(e)},t.on=f=function(e,n){"focus"===e||"blur"===e||"change"===e||"select"===e||"keydown"===e||"keypress"===e||"keyup"===e?EVENT({node:t,lowNode:i,name:e},n):EVENT({node:t,lowNode:o,name:e},n)}}}),UUI.FULL_SUBMIT=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i=void 0===n?void 0:n.value;o=INPUT({type:"submit",style:{display:"block",border:"none",width:"100%",padding:"10px 0",cursor:"pointer"}}),void 0!==i&&o.setValue(i),e.setDom(o)}}),UUI.FULL_TEXTAREA=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a,d,u,c,l,s,p,f,v=n.name,m=n.placeholder,y=n.value,g=n.wrapperStyle,E=n.textareaStyle;o=DIV({style:{padding:5,backgroundColor:"#FFF",position:"relative",height:100},c:i=TEXTAREA({style:{width:"100%",height:"100%",backgroundColor:"transparent",border:"none"},name:v,placeholder:m,value:y})}),e.setWrapperDom(o),t.getName=r=function(){return v},t.getValue=a=function(){return i.getValue()},t.setValue=d=function(e){i.setValue(e)},t.select=u=function(){i.select()},t.focus=c=function(){i.focus()},t.blur=l=function(){i.blur()},t.addWrapperStyle=s=function(e){o.addStyle(e)},void 0!==g&&s(g),t.addTextareaStyle=p=function(e){i.addStyle(e)},void 0!==E&&p(E),t.on=f=function(e,n){"focus"===e||"blur"===e||"change"===e||"keydown"===e||"keypress"===e||"keyup"===e?EVENT({node:t,lowNode:i,name:e},n):EVENT({node:t,lowNode:o,name:e},n)}}}),UUI.FULL_UPLOAD_FORM=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a,d,u,c,l,s,p,f,v=n.box,m=n.wrapperStyle,y=n.formStyle,g=n.inputStyle,E=n.uploadingStyle,S=n.uploadOverSizeFile,C=n.uploadSuccess;o=DIV({style:{padding:5,background:"#FFF",position:"relative"},c:[a=IFRAME({style:{display:"none"},name:"__UPLOAD_FORM_"+t.id}),d=UUI.PANEL({wrapperStyle:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"none"},contentStyle:{backgroundColor:"#000",position:"absolute",top:"50%",left:"50%",width:100,marginLeft:-55,marginTop:-13,padding:5,textAlign:"center",borderRadius:10,color:"#fff"},c:"Uploading..."})]}),GET("__UPLOAD_SERVER_HOST",function(e){var n=global.location.protocol+"//"+global.location.host+"/__UPLOAD_CALLBACK";a.after(i=FORM({action:"http://"+(""===e?global.location.hostname:e)+":"+CONFIG.webServerPort+"/__UPLOAD?boxName="+v.boxName+"&callbackURL="+n,target:"__UPLOAD_FORM_"+t.id,method:"POST",enctype:"multipart/form-data",style:COMBINE([{padding:5},y]),c:[r=INPUT({type:"file",name:"file",isMultiple:!0,style:COMBINE([{width:"100%",height:"100%",color:"#000",border:"none"},g])}),INPUT({type:"submit",style:{visibility:"hidden",position:"absolute"}})]})),EVENT({node:r,name:"change"},function(){""!==r.getValue()&&(d.show(),void 0!==i&&i.submit(!0))})}),EVENT({node:a,name:"load"},function(){var e,n=global["__UPLOAD_FORM_"+t.id],o=void 0!==n?n.fileDataSetStr:void 0,i=void 0!==n?n.maxUploadFileMB:void 0;void 0!==i?(void 0!==S&&S(i),r.setValue("")):void 0!==o&&(e=PARSE_STR(decodeURIComponent(o)),EACH(e,function(t,n){e[n]=UNPACK_DATA(t)}),void 0!==C&&C(e),r.setValue("")),d.hide()}),e.setWrapperDom(o),t.select=u=function(){void 0!==r&&r.select()},t.addWrapperStyle=c=function(e){o.addStyle(e)},void 0!==m&&c(m),t.addFormStyle=l=function(e){void 0!==i?i.addStyle(e):EXTEND({origin:y,extend:e})},void 0!==y&&l(y),t.addInputStyle=s=function(e){void 0!==r?r.addStyle(e):EXTEND({origin:g,extend:e})},void 0!==g&&s(g),t.addUploadingStyle=p=function(e){d.addWrapperStyle(e)},void 0!==E&&p(E),t.on=f=function(e,n){"focus"===e||"blur"===e||"change"===e||"keydown"===e||"keypress"===e||"keyup"===e?EVENT({node:t,lowNode:r,name:e},n):EVENT({node:t,lowNode:o,name:e},n)}}}),UUI.IMG_BUTTON=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a=n.img,d=n.href,u=n.target;o=A({style:{cursor:"pointer",textDecoration:"none",touchCallout:"none",userSelect:"none"},href:d,target:u,c:a}),e.setDom(o),t.getImg=i=function(){return a},t.tap=r=function(){EVENT.fireAll({node:t,name:"tap"})}}}),UUI.LIST=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a,d,u,c,l=void 0===n?void 0:n.isRequiringClearBoth,s=[],p={};void 0===i&&(i={}),e.setDom(o=UL()),t.addItem=a=function(e){var t=e.key,n=e.item,a=e.isFirst;void 0!==i[t]?(n.insertBefore(i[t]),s[FIND({array:s,value:i[t]})]=n,i[t].remove()):a===!0&&s.length>0?(n.insertBefore(s[0]),s.unshift(n)):(o.append(n),s.push(n)),i[t]=n,l===!0&&(void 0!==r&&r.remove(),r=CLEAR_BOTH().appendTo(o))},void 0!==n&&void 0!==n.items&&EACH(n.items,function(e,t){a({key:t,item:e})}),t.removeItem=d=function(e){var t=i[e],n=p[e];void 0!==t&&t.remove(),void 0!==n&&EACH(n,function(e){e()}),REMOVE({array:s,value:t}),REMOVE({data:i,name:e}),REMOVE({data:p,name:e})},t.addRemoveItemHandler=u=function(e,t){void 0===p[e]&&(p[e]=[]),p[e].push(t)},t.removeAllItems=c=function(){EACH(i,function(e,t){var n=p[t];e.remove(),void 0!==n&&EACH(n,function(e){e()})}),i={},s=[],p={}}}}),UUI.LOADING=CLASS({init:function(e,t,n){"use strict";var o,i,r,a,d,u,c,l,s,p,f,v=n.wrapperStyle,m=n.contentStyle,y=n.indicator,g=n.msg,E=n.on;o=UUI.MODAL({wrapperStyle:COMBINE([{textAlign:"center"},v]),contentStyle:m,isCannotClose:!0,c:[void 0===y?"":y,P({style:void 0===y?{}:{marginTop:10},c:g})],on:E}),t.getNode=i=function(){return o.getNode()},t.append=r=function(e){o.append(e)},t.prepend=a=function(e){o.prepend(e)},t.after=d=function(e){o.after(e)},t.before=u=function(e){o.before(e)},t.remove=c=function(){o.remove()},t.empty=l=function(){o.empty()},t.getChildren=s=function(){return o.getChildren()},t.addWrapperStyle=p=function(e){o.addWrapperStyle(e)},t.addContentStyle=f=function(e){o.addContentStyle(e)}}}),UUI.MODAL=CLASS({init:function(e,t,n){"use strict";var o,i,r,a,d,u,c,l,s,p,f,v,m,y,g,E,S,C,N=void 0===n?void 0:n.c,A=void 0===n?void 0:n.wrapperStyle,h=void 0===n?void 0:n.contentStyle,T=void 0===n?void 0:n.xStyle,I=void 0===n?void 0:n.xImg,U=void 0===n?void 0:n.isCannotClose,S=void 0===n?void 0:n.on;void 0===I&&U!==!0&&(I=IMG({src:UUI.R("x.png")})),o=DIV({c:[i=DIV(),U===!0?"":UUI.IMG_BUTTON({style:COMBINE([{position:"absolute"},void 0===T?{top:-20,right:-20,padding:10}:T]),img:I,on:{tap:function(){C()},mouseover:function(){g({opacity:.8})},mouseout:function(){g({opacity:1})}}})]}).appendTo(BODY),c=RAR(function(){var e,t=(WIN_WIDTH()-o.getWidth())/2+SCROLL_LEFT(),n=(WIN_HEIGHT()-o.getHeight())/2+SCROLL_TOP();o.addStyle({position:"absolute",left:0>t?0:t,top:0>n?0:n}),(e=function(t){EACH(t,function(t){t.type===IMG&&EVENT({node:t,name:"load"},function(){c()}),void 0!==t.getChildren&&e(t.getChildren())})})(o.getChildren())}),o.on("show",c),r=EVENT({name:"resize"},c),a=EVENT({name:"scroll"},c),d=EVENT({name:"keydown"},function(e){27===e.getKeyCode()&&U!==!0&&C()}),o.on("remove",function(){r.remove(),a.remove(),d.remove()}),t.getNode=u=function(){return o},t.append=l=function(e){i.append(e),c()},void 0!==N&&(CHECK_IS_ARRAY(N)===!0?EACH(N,function(e){l(e)}):l(N)),t.prepend=s=function(e){i.prepend(e),c()},t.after=p=function(e){o.after(e),c()},t.before=f=function(e){o.before(e),c()},t.remove=v=function(){o.remove()},t.empty=m=function(){i.empty()},t.getChildren=y=function(){return i.getChildren()},t.addWrapperStyle=g=function(e){o.addStyle(e),c()},void 0!==A&&g(A),t.addContentStyle=E=function(e){i.addStyle(e),c()},void 0!==h&&E(h),t.on=S=function(e,n){EVENT({node:t,lowNode:o,name:e},n)},t.close=C=function(){EVENT.fireAll({node:t,name:"close"})!==!1&&v()}},afterInit:function(e,t,n){"use strict";var o;void 0!==n&&CHECK_IS_DATA(n)===!0&&(o=n.on),void 0!==o&&EACH(o,function(e,n){t.on(n,e)})}}),UUI.NOTICE=CLASS({init:function(e,t,n){"use strict";var o,i,r,a,d,u,c,l,s,p,f,v=n.wrapperStyle,m=n.contentStyle,y=n.isCannotClose,g=n.on,E=n.msg;o=UUI.MODAL({wrapperStyle:COMBINE([{textAlign:"center"},v]),contentStyle:m,isCannotClose:!0,on:g,c:E}),t.getNode=i=function(){return o.getNode()},t.append=r=function(e){o.append(e)},t.prepend=a=function(e){o.prepend(e)},t.after=d=function(e){o.after(e)},t.before=u=function(e){o.before(e)},t.remove=c=function(){o.remove()},t.empty=l=function(){o.empty()},t.getChildren=s=function(){return o.getChildren()},t.addWrapperStyle=p=function(e){o.addWrapperStyle(e)},t.addContentStyle=f=function(e){o.addContentStyle(e)},y!==!0&&DELAY(2,function(){o.close()})}}),UUI.PANEL=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a,d=void 0===n?void 0:n.wrapperStyle,u=void 0===n?void 0:n.contentStyle;o=DIV({c:i=DIV()}),e.setWrapperDom(o),e.setContentDom(i),t.addWrapperStyle=r=function(e){o.addStyle(e)},void 0!==d&&r(d),t.addContentStyle=a=function(e){i.addStyle(e)},void 0!==u&&a(u)}}),UUI.TABLE=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a,d,u=void 0===n?void 0:n.trs,c=[],l={};void 0===u&&(u={}),e.setDom(o=TABLE()),t.addTR=i=function(e){var t=e.key,n=e.tr,i=e.isFirst;void 0!==u[t]?(n.insertBefore(u[t]),c[FIND({array:c,value:u[t]})]=n,u[t].remove()):i===!0&&c.length>0?(n.insertBefore(c[0]),c.unshift(n)):(o.append(n),c.push(n)),u[t]=n},EACH(u,function(e){c.push(e),o.append(e)}),t.removeTR=r=function(e){var t=u[e],n=l[e];void 0!==t&&t.remove(),void 0!==n&&EACH(n,function(e){e()}),REMOVE({array:c,value:t}),REMOVE({data:u,name:e}),REMOVE({data:l,name:e})},t.addRemoveTRHandler=a=function(e,t){void 0===l[e]&&(l[e]=[]),l[e].push(t)},t.removeAllTRs=d=function(){EACH(u,function(e,t){var n=l[t];e.remove(),void 0!==n&&EACH(n,function(e){e()})}),u={},c=[],l={}}}}),UUI.TEXT_BUTTON=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a,d=n.title,u=n.href,c=n.target;o=A({style:{cursor:"pointer",textDecoration:"none",touchCallout:"none",userSelect:"none"},href:u,target:c,c:i=SPAN({c:void 0===d?void 0===u?"":u:d})}),e.setDom(o),t.setTitle=r=function(e){i.empty(),i.append(e)},t.tap=a=function(){EVENT.fireAll({node:t,name:"tap"})}}}),UUI.VALID_FORM=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a,d,u,c=void 0===n?void 0:n.errorMsgs,l=void 0===n?void 0:n.errorMsgStyle,s=[];o=FORM(),t.on("remove",function(){EACH(s,function(e){e.remove()})}),e.setDom(o),t.getData=i=function(){var e={},n=function(t){EACH(t.getChildren(),function(t){void 0!==t.getValue&&void 0!==t.getName&&void 0!==t.getName()&&(e[t.getName()]=t.getValue()),n(t)})};return n(t),e},t.setData=r=function(e){var n=function(t){EACH(t.getChildren(),function(t){var o;void 0!==t.setValue&&void 0!==t.getName&&void 0!==t.getName()&&(o=e[t.getName()],t.setValue(void 0===o?"":o)),n(t)})};n(t)},t.submit=a=function(){o.submit()},t.showErrors=d=function(e){var n=COPY(e),o=function(e){EACH(e.getChildren(),function(e){var t,i,r,a;void 0!==e.getValue&&void 0!==e.getName&&(t=e.getName(),i=n[t],void 0!==i&&void 0!==c&&(r=c[t][i.type],"function"==typeof r&&(r=r(void 0!==i.validParam?i.validParam:i.validParams)),e.after(a=P({style:l,c:r})),REMOVE({data:n,name:t}),s.push(DELAY(2,function(e){a.remove(),REMOVE({array:s,value:e})})))),o(e)})};o(t)},t.getErrorMsgs=u=function(e){var n=COPY(e),o=[],i=function(e){EACH(e.getChildren(),function(e){var t,r,a;void 0!==e.getValue&&void 0!==e.getName&&(t=e.getName(),r=n[t],void 0!==r&&void 0!==c&&(a=c[t][r.type],"function"==typeof a&&(a=a(void 0!==r.validParam?r.validParam:r.validParams)),o.push(a),REMOVE({data:n,name:t}))),i(e)})};return i(t),o}}}),UUI.V_CENTER=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a,d=void 0===n?void 0:n.wrapperStyle,u=void 0===n?void 0:n.contentStyle;o=TABLE({style:{width:"100%",margin:0,padding:0},c:TR({style:{margin:0,padding:0},c:i=TD({style:{margin:0,padding:0}})})}),e.setWrapperDom(o),e.setContentDom(i),t.addWrapperStyle=r=function(e){o.addStyle(e)},void 0!==d&&r(d),t.addContentStyle=a=function(e){i.addStyle(e)},void 0!==u&&a(u)}});